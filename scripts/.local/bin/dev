#!/bin/bash
# Launch a coding layout with 3 tmux windows
# Usage: dev [directory]
#   If directory is provided, all windows open there
#   Otherwise uses current directory
#
# Layout:
#   Window 1: nvim    (editor)
#   Window 2: claude  (AI assistant)
#   Window 3: console (terminal)

if [ -z "$TMUX" ]; then
    echo "Not in a tmux session"
    exit 1
fi

dir="${1:-.}"
dir="$(cd "$dir" && pwd)"

# Rename current window to "nvim" and launch editor
tmux rename-window "nvim"
tmux send-keys "nvim ." C-m

# Create claude window and launch claude
tmux new-window -n "claude" -c "$dir"
tmux send-keys "claude" C-m

# Create console window (plain shell)
tmux new-window -n "console" -c "$dir"

# Jump back to nvim window
tmux select-window -t 1
